<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dragon Game - Partida en Curso</title>
    <link rel="stylesheet" href="../css/game.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bubblegum+Sans:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Fondo de part√≠culas animadas -->
    <div class="particles-bg" id="particlesBg"></div>
    
    <!-- Header con informaci√≥n del juego -->
    <header class="game-header-pokemon">
        <div class="header-left">
            <div class="game-logo">
                <span class="dragon-icon">üêâ</span>
                <span class="game-title">DRAGON CARDS</span>
            </div>
            <div class="game-status-info">
                <span class="round-display" id="currentRound">Ronda: 1/8</span>
                <span class="attribute-display" id="currentAttribute">üé≤ Seleccionando...</span>
            </div>
        </div>
        <div class="header-right">
            <div class="timer-display">
                <span class="timer-icon">‚è±Ô∏è</span>
                <span class="timer-text" id="gameTimer">00:00</span>
            </div>
            <button class="menu-btn" onclick="toggleGameMenu()">‚öôÔ∏è</button>
        </div>
    </header>

    <!-- Tablero principal estilo Pok√©mon -->
    <main class="pokemon-game-board">
        <!-- Informaci√≥n de jugadores en las esquinas -->
        <div class="player-zone top-left" id="playerZone1">
            <div class="player-card">
                <div class="player-avatar">
                    <div class="avatar-ring active">
                        <img src="../Img/avatar1.png" alt="Jugador 1" onerror="this.style.display='none'">
                        <div class="avatar-placeholder">üë§</div>
                    </div>
                    <div class="turn-indicator">üéØ</div>
                </div>
                <div class="player-info">
                    <div class="player-name">Jugador 1</div>
                    <div class="player-stats">
                        <div class="stat-item">
                            <span class="stat-icon">üèÜ</span>
                            <span class="stat-value" id="player1Score">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">üÉè</span>
                            <span class="stat-value" id="player1Cards">8</span>
                        </div>
                    </div>
                </div>
                <div class="player-deck">
                    <div class="deck-stack">
                        <div class="card-back"></div>
                        <div class="card-back"></div>
                        <div class="card-back"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="player-zone top-right" id="playerZone2">
            <div class="player-card">
                <div class="player-avatar">
                    <div class="avatar-ring">
                        <img src="../Img/avatar2.png" alt="Jugador 2" onerror="this.style.display='none'">
                        <div class="avatar-placeholder">üë§</div>
                    </div>
                </div>
                <div class="player-info">
                    <div class="player-name">Jugador 2</div>
                    <div class="player-stats">
                        <div class="stat-item">
                            <span class="stat-icon">üèÜ</span>
                            <span class="stat-value" id="player2Score">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">üÉè</span>
                            <span class="stat-value" id="player2Cards">8</span>
                        </div>
                    </div>
                </div>
                <div class="player-deck">
                    <div class="deck-stack">
                        <div class="card-back"></div>
                        <div class="card-back"></div>
                        <div class="card-back"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="player-zone bottom-left" id="playerZone3">
            <div class="player-card">
                <div class="player-avatar">
                    <div class="avatar-ring">
                        <img src="../Img/avatar3.png" alt="Jugador 3" onerror="this.style.display='none'">
                        <div class="avatar-placeholder">üë§</div>
                    </div>
                </div>
                <div class="player-info">
                    <div class="player-name">Jugador 3</div>
                    <div class="player-stats">
                        <div class="stat-item">
                            <span class="stat-icon">üèÜ</span>
                            <span class="stat-value" id="player3Score">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">üÉè</span>
                            <span class="stat-value" id="player3Cards">8</span>
                        </div>
                    </div>
                </div>
                <div class="player-deck">
                    <div class="deck-stack">
                        <div class="card-back"></div>
                        <div class="card-back"></div>
                        <div class="card-back"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="player-zone bottom-right" id="playerZone4">
            <div class="player-card">
                <div class="player-avatar">
                    <div class="avatar-ring">
                        <img src="../Img/avatar4.png" alt="Jugador 4" onerror="this.style.display='none'">
                        <div class="avatar-placeholder">üë§</div>
                    </div>
                </div>
                <div class="player-info">
                    <div class="player-name">Jugador 4</div>
                    <div class="player-stats">
                        <div class="stat-item">
                            <span class="stat-icon">üèÜ</span>
                            <span class="stat-value" id="player4Score">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">üÉè</span>
                            <span class="stat-value" id="player4Cards">8</span>
                        </div>
                    </div>
                </div>
                <div class="player-deck">
                    <div class="deck-stack">
                        <div class="card-back"></div>
                        <div class="card-back"></div>
                        <div class="card-back"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tablero central circular -->
        <div class="central-battlefield">
            <!-- √Årea de informaci√≥n del atributo y ronda -->
            <div class="battle-info-panel">
                <div class="current-attribute-info">
                    <div class="attribute-icon-big" id="attributeIconBig">üé≤</div>
                    <div class="attribute-name-big" id="attributeNameBig">Preparando Ronda</div>
                    <div class="round-counter" id="roundCounter">Ronda 1 de 8</div>
                </div>
            </div>

            <!-- C√≠rculo central para cartas jugadas -->
            <div class="battle-circle">
                <div class="center-orb">
                    <div class="orb-glow"></div>
                    <div class="dragon-ball-center">
                        <div class="stars">‚≠ê</div>
                        <div class="dragon-logo">üêâ</div>
                    </div>
                </div>

                <!-- Posiciones para cartas jugadas alrededor del c√≠rculo -->
                <div class="battle-position pos-1" data-player="1">
                    <div class="position-slot">
                        <div class="slot-glow"></div>
                        <div class="slot-content">
                            <span class="player-slot-name">Jugador 1</span>
                        </div>
                    </div>
                </div>

                <div class="battle-position pos-2" data-player="2">
                    <div class="position-slot">
                        <div class="slot-glow"></div>
                        <div class="slot-content">
                            <span class="player-slot-name">Jugador 2</span>
                        </div>
                    </div>
                </div>

                <div class="battle-position pos-3" data-player="3">
                    <div class="position-slot">
                        <div class="slot-glow"></div>
                        <div class="slot-content">
                            <span class="player-slot-name">Jugador 3</span>
                        </div>
                    </div>
                </div>

                <div class="battle-position pos-4" data-player="4">
                    <div class="position-slot">
                        <div class="slot-glow"></div>
                        <div class="slot-content">
                            <span class="player-slot-name">Jugador 4</span>
                        </div>
                    </div>
                </div>

                <div class="battle-position pos-5" data-player="5">
                    <div class="position-slot">
                        <div class="slot-glow"></div>
                        <div class="slot-content">
                            <span class="player-slot-name">Jugador 5</span>
                        </div>
                    </div>
                </div>

                <div class="battle-position pos-6" data-player="6">
                    <div class="position-slot">
                        <div class="slot-glow"></div>
                        <div class="slot-content">
                            <span class="player-slot-name">Jugador 6</span>
                        </div>
                    </div>
                </div>

                <div class="battle-position pos-7" data-player="7">
                    <div class="position-slot">
                        <div class="slot-glow"></div>
                        <div class="slot-content">
                            <span class="player-slot-name">Jugador 7</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Indicador de turno din√°mico -->
            <div class="turn-arrow-container">
                <div class="turn-arrow" id="turnArrow">
                    <div class="arrow-glow"></div>
                    <div class="arrow-pointer">‚û§</div>
                </div>
                <div class="turn-text" id="turnText">Turno de Jugador 1</div>
            </div>
        </div>

        <!-- Paneles laterales de informaci√≥n -->
        <div class="side-info-left">
            <div class="info-panel">
                <div class="panel-header">
                    <span class="panel-icon">üìä</span>
                    <span class="panel-title">Estado del Juego</span>
                </div>
                <div class="panel-content">
                    <div class="game-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="gameProgress" style="width: 12.5%"></div>
                        </div>
                        <div class="progress-text">Ronda 1/8</div>
                    </div>
                    <div class="game-stats">
                        <div class="stat-row">
                            <span class="stat-label">‚è±Ô∏è Tiempo:</span>
                            <span class="stat-value" id="gameTimeDisplay">00:00</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">üéØ Atributo:</span>
                            <span class="stat-value" id="currentAttributeDisplay">-</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">üë• Jugadores:</span>
                            <span class="stat-value" id="totalPlayersDisplay">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="side-info-right">
            <div class="info-panel">
                <div class="panel-header">
                    <span class="panel-icon">üìà</span>
                    <span class="panel-title">Estad√≠sticas</span>
                </div>
                <div class="panel-content">
                    <div class="attributes-used">
                        <h4>Atributos Usados</h4>
                        <div class="attr-list" id="usedAttributesList">
                            <div class="attr-used">üìè Altura: 0</div>
                            <div class="attr-used">‚ö° Fuerza: 0</div>
                            <div class="attr-used">üèÉ Velocidad: 0</div>
                            <div class="attr-used">üß† T√©cnica: 0</div>
                            <div class="attr-used">üí´ Ki: 0</div>
                            <div class="attr-used">üèÜ Peleas: 0</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- √Årea de la mano del jugador actual -->
    <section class="player-hand-section">
        <div class="hand-container">
            <div class="hand-header">
                <div class="hand-title">
                    <span class="hand-icon">üÉè</span>
                    <span class="hand-text" id="handTitle">Cartas del Jugador Actual</span>
                </div>
                <div class="hand-controls">
                    <button class="hand-control-btn" id="sortCards" title="Ordenar cartas">
                        <span>üîÑ</span>
                    </button>
                    <button class="hand-control-btn" id="viewMode" title="Cambiar vista">
                        <span>üëÅÔ∏è</span>
                    </button>
                    <div class="cards-counter">
                        <span id="cardsRemaining">0</span>/<span id="totalCards">8</span>
                    </div>
                </div>
            </div>
            <div class="hand-cards-area">
                <div class="cards-hand" id="playerCards">
                    <div class="no-cards-message">
                        <div class="no-cards-icon">üÉè</div>
                        <div class="no-cards-text">Las cartas aparecer√°n aqu√≠ cuando sea tu turno</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal para resultado de ronda -->
    <div class="pokemon-modal" id="roundResultModal">
        <div class="modal-backdrop" onclick="closeModal('roundResultModal')"></div>
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title">üèÜ Resultado de la Ronda</h2>
                <button class="modal-close" onclick="closeModal('roundResultModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="round-winner-announcement" id="roundWinnerDisplay">
                    <!-- Se llenar√° din√°micamente -->
                </div>
                <div class="round-comparison" id="roundComparison">
                    <!-- Se llenar√° din√°micamente -->
                </div>
            </div>
            <div class="modal-actions">
                <button class="pokemon-btn primary" onclick="nextRound()">
                    <span>Siguiente Ronda</span>
                    <span class="btn-icon">‚û°Ô∏è</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Modal para fin del juego -->
    <div class="pokemon-modal" id="gameOverModal">
        <div class="modal-backdrop" onclick="closeModal('gameOverModal')"></div>
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title">üéâ ¬°Fin del Juego!</h2>
            </div>
            <div class="modal-body">
                <div class="game-final-results" id="finalGameResults">
                    <!-- Se llenar√° din√°micamente -->
                </div>
            </div>
            <div class="modal-actions">
                <button class="pokemon-btn secondary" onclick="returnToLobby()">
                    <span>Volver al Lobby</span>
                    <span class="btn-icon">üè†</span>
                </button>
                <button class="pokemon-btn primary" onclick="playAgain()">
                    <span>Jugar de Nuevo</span>
                    <span class="btn-icon">üîÑ</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Modal del men√∫ del juego -->
    <div class="pokemon-modal" id="gameMenuModal">
        <div class="modal-backdrop" onclick="closeModal('gameMenuModal')"></div>
        <div class="modal-container small">
            <div class="modal-header">
                <h3 class="modal-title">‚öôÔ∏è Men√∫ del Juego</h3>
                <button class="modal-close" onclick="closeModal('gameMenuModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="menu-options">
                    <button class="menu-option" onclick="toggleSound()">
                        <span class="option-icon">üîä</span>
                        <span class="option-text">Sonido: ON</span>
                    </button>
                    <button class="menu-option" onclick="showGameRules()">
                        <span class="option-icon">üìñ</span>
                        <span class="option-text">Reglas del Juego</span>
                    </button>
                    <button class="menu-option" onclick="returnToLobby()">
                        <span class="option-icon">üè†</span>
                        <span class="option-text">Volver al Lobby</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Sistema de alertas estilo Pok√©mon -->
    <div class="pokemon-alerts" id="alertsContainer">
        <!-- Las alertas se generar√°n din√°micamente -->
    </div>

    <!-- Efectos visuales -->
    <canvas class="effects-canvas" id="effectsCanvas"></canvas>

    <script src="../js/game.js"></script>
    <script src="../js/pokemon-effects.js"></script>
</body>
</html>